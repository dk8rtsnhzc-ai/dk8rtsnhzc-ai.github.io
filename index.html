<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CTRL + Z</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff41">

<style>
@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600&display=swap');

:root {
  --green:#00ff41;
  --red:#ff0033;
  --bg:#000;
}

* {
  box-sizing:border-box;
  font-family:'Source Code Pro', monospace;
}

body {
  margin:0;
  background:black;
  color:var(--green);
}

/* login */
#login {
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:black;
  z-index:10;
}

.login-box {
  border:1px solid var(--green);
  padding:20px;
  width:90%;
  max-width:320px;
  text-align:center;
}

.login-box button {
  width:100%;
  margin-top:10px;
  background:black;
  color:var(--green);
  border:1px solid var(--green);
  padding:10px;
}

/* header */
header {
  text-align:center;
  padding:12px;
  border-bottom:1px solid var(--green);
  font-size:18px;
}

/* layout */
main {
  padding:10px;
}

/* post box */
.post-box textarea {
  width:100%;
  height:80px;
  background:black;
  border:1px solid var(--green);
  color:var(--green);
  padding:8px;
}

.post-box button {
  width:100%;
  margin-top:8px;
  padding:10px;
  background:black;
  border:1px solid var(--green);
  color:var(--green);
}

/* posts */
.post {
  border:1px solid var(--green);
  padding:10px;
  margin-top:10px;
}

.post img {
  max-width:100%;
  margin-top:6px;
  border:1px solid var(--green);
}

.post-meta {
  font-size:12px;
  margin-top:6px;
}

/* terminal */
#terminal {
  position:fixed;
  bottom:0;
  width:100%;
  border-top:1px solid var(--green);
  background:black;
  padding:6px;
  font-size:12px;
}
</style>
</head>

<body>

<div id="login">
  <div class="login-box">
    <h3>CTRL + Z</h3>
    <p>ENTER SCHOOL EMAIL</p>
    <input style="width:100%;padding:8px;background:black;border:1px solid var(--green);color:var(--green)">
    <button onclick="enter()">ENTER</button>
  </div>
</div>

<header>CTRL + Z</header>

<main>
  <div class="post-box">
    <textarea id="text" placeholder=">_ speak freely"></textarea>
    <input type="file" id="img" accept="image/*">
    <button onclick="post()">EXECUTE</button>
  </div>

  <div id="posts"></div>
</main>

<div id="terminal">> SYSTEM_LOG: INITIALIZING...</div>

<script>
/* login */
function enter(){
  login.style.display="none";
  terminal.textContent="> SYSTEM_LOG: ACCESS GRANTED";
}

/* post */
function post(){
  const t=text.value;
  const f=img.files[0];
  if(!t && !f) return;

  const d=document.createElement("div");
  d.className="post";
  let imgHTML="";

  function render(){
    d.innerHTML=`
      <strong>Anonymous #${Math.floor(Math.random()*999)}</strong>
      <p>${t}</p>
      ${imgHTML}
      <div class="post-meta">
        Likes <span class="l">0</span>
        <button onclick="like(this)">+</button>
        Reposts <span class="r">0</span>
        <button onclick="repost(this)">+</button>
      </div>
    `;
    posts.prepend(d);
    terminal.textContent="> SYSTEM_LOG: PACKET SENT";
  }

  if(f){
    const r=new FileReader();
    r.onload=e=>{imgHTML=`<img src="${e.target.result}">`;render();}
    r.readAsDataURL(f);
  } else render();

  text.value="";
  img.value="";
}

function like(b){
  const s=b.parentNode.querySelector(".l");
  s.textContent=+s.textContent+1;
}
function repost(b){
  const s=b.parentNode.querySelector(".r");
  s.textContent=+s.textContent+1;
}

/* PWA */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
